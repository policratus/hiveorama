function graphSelector(e){switch(e){case"java":plotGraph(getGEXF("/data/codeminer.gexf"));break;case"celegans":plotGraph(getGEXF("/data/celegans.gexf"));break;case"social":plotGraph(getGEXF("/data/social.gexf"));break;default:break}}function getGEXF(e){var t;t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");t.overrideMimeType("text/xml");t.open("GET",e,false);t.send();return t.responseXML}function readXMLFile(e){var t=document.getElementById("filesGraph").files[0];if(t){var n=new FileReader;n.readAsText(t,"UTF-8");n.onload=loadedXML}}function loadedXML(e){var t=e.target.result;if(window.DOMParser){parser=new DOMParser;xmlFile=parser.parseFromString(t,"text/xml");var n=xmlFile.childNodes[0].tagName;if(n!="gexf"){$("#graphDiv").empty();$("#resultSection").animate({height:"0px"},1e3,function(){showResults(false);alert("Sorry! This file don't seen to be a valid GEXF File\nPlease, try loading another file or try our samples!")})}else{plotGraph(xmlFile)}}}function plotGraph(e){$("#resultSection").animate({height:"1500px"},1e3,function(){$("#graphDiv").empty();$("#graphDiv").height("600px");var t=sigma.init($("#graphDiv")[0]).drawingProperties({defaultLabelColor:"#000",defaultLabelSize:14,defaultLabelBGColor:"#000",defaultLabelHoverColor:"#000",labelThreshold:10,defaultEdgeType:"curve"}).graphProperties({minNodeSize:.5,maxNodeSize:10,minEdgeSize:1,maxEdgeSize:5}).mouseProperties({maxRatio:10});t.parseGexf(e);t.bind("overnodes",function(e){var n=e.content;var r={};t.iterEdges(function(e){if(n.indexOf(e.source)>=0||n.indexOf(e.target)>=0){r[e.source]=1;r[e.target]=1}}).iterNodes(function(e){if(!r[e.id]){e.hidden=1}else{e.hidden=0}}).draw(2,2,2)}).bind("outnodes",function(){t.iterEdges(function(e){e.hidden=0}).iterNodes(function(e){e.hidden=0}).draw(2,2,2)});t.draw();var n=new google.visualization.DataTable;n.addColumn("number","Nodes count");n.addColumn("number","Edges count");var r=[];r.push(t.getNodesCount());r.push(t.getEdgesCount());n.addRows([r]);var i=document.getElementById("graphSumm");var s=new google.visualization.Table(i);s.clearChart();s.draw(n,{width:"99%",page:"disable",pageSize:10,showRowNumber:false});var o=new google.visualization.DataTable;o.addColumn("string","Id");o.addColumn("string","Node name");o.addColumn("number","Incidence degree");o.addColumn("number","Inverse incidence degree");o.addColumn("number","Node size");for(var u=0;u<t.getNodesCount();u++){var a=[];try{a.push(t.getNodes(u).id);a.push(t.getNodes(u).label);a.push(t.getNodes(u).inDegree);a.push(t.getNodes(u).outDegree);a.push(t.getNodes(u).size);o.addRows([a])}catch(f){continue}}var l=document.getElementById("nodeProperties");var c=new google.visualization.Table(l);c.clearChart();c.draw(o,{width:"99%",page:"enable",pageSize:5,showRowNumber:false});var h=new google.visualization.DataTable;h.addColumn("string","Id");h.addColumn("string","Source node name");h.addColumn("string","Target node name");for(var u=0;u<t.getEdgesCount();u++){var p=[];try{p.push(t.getEdges(u).id);p.push(t.getNodes(t.getEdges(u).source).label);p.push(t.getNodes(t.getEdges(u).target).label);h.addRows([p])}catch(f){continue}}var d=document.getElementById("edgeProperties");var v=new google.visualization.Table(d);v.clearChart();v.draw(h,{width:"99%",page:"enable",pageSize:5,showRowNumber:false});showResults(true)})}function showResults(e){var t=document.getElementById("divider");var n=document.getElementById("pgraphresults");var r=document.getElementById("pgraphSumm");var i=document.getElementById("pNodeProp");var s=document.getElementById("pEdgeProp");var o=document.getElementById("pGraphVis");var u=document.getElementById("spanClose");if(e){t.style.visibility="visible";u.style.visibility="visible";n.innerHTML="";var a=document.createElement("p");var f=document.createTextNode("Results");a.appendChild(f);n.appendChild(a);r.innerHTML="";var a=document.createElement("p");var f=document.createTextNode("Graph Summary");a.appendChild(f);r.appendChild(a);i.innerHTML="";var a=document.createElement("p");var f=document.createTextNode("Nodes properties");i.appendChild(f);var s=document.getElementById("pEdgeProp");s.innerHTML="";var a=document.createElement("p");var f=document.createTextNode("Edges properties");s.appendChild(f);o.innerHTML="";var a=document.createElement("p");var f=document.createTextNode("Graph Visualization");o.appendChild(f)}else{t.style.visibility="hidden";u.style.visibility="hidden";n.innerHTML="";r.innerHTML="";i.innerHTML="";s.innerHTML="";o.innerHTML="";graphDiv.innerHTML="";var l=document.getElementById("nodeProperties");var c=new google.visualization.Table(l);c.clearChart();var h=document.getElementById("edgeProperties");var p=new google.visualization.Table(h);p.clearChart();var d=document.getElementById("graphSumm");var v=new google.visualization.Table(d);v.clearChart();$("#graphDiv").empty();$("#graphDiv").height("0px")}}$(document).ready(function(){if(isAPIAvailable()){$("#filesGraph").bind("change",readXMLFile)}})