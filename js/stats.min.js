function openStats(){drawFiveNumTable(stocks);drawVisualization(stocks);showResults(true)}function drawVisualization(e){var t=FiveNumSumm(e);var n=t["labels"];var r=t["summary"];var i=new google.visualization.DataTable;i.addColumn("string","Label");i.addColumn("number","Min");i.addColumn("number","Quartile1");i.addColumn("number","Quartile3");i.addColumn("number","Max");for(var s=0;s<n.length;s++){auxArray=[];auxArray.push(n[s]);for(var o=0;o<r[s].length;o++){if(o==0||o==1||o==3||o==4){auxArray.push(parseFloat(r[s][o].toFixed(2)))}}i.addRows([auxArray])}var u={legend:"none",chartArea:{width:"80%",height:"80%"},backgroundColor:"#FAFAFA"};$("#chart_div").height("400px");var a=document.getElementById("chart_div");var f=new google.visualization.CandlestickChart(a);f.draw(i,u)}function drawFiveNumTable(e){$("#resultSection").animate({height:"950px"},1e3,function(){var t=FiveNumSumm(e);var n=t["labels"];var r=t["summary"];var i=new google.visualization.DataTable;i.addColumn("string","Label");i.addColumn("number","Minimum");i.addColumn("number","Quartile 1");i.addColumn("number","Average");i.addColumn("number","Quartile 3");i.addColumn("number","Maximum");i.addColumn("number","Sum");i.addColumn("number","Std. Deviation");i.addColumn("number","Variance");for(var s=0;s<n.length;s++){auxArray=[];auxArray.push(stringStripper(n[s]));for(var o=0;o<r[s].length;o++){auxArray.push(parseFloat(r[s][o].toFixed(2)))}i.addRows([auxArray])}var u=document.getElementById("fivenum_div");var a=new google.visualization.Table(u);a.clearChart();a.draw(i,{width:"99%",page:"enable",pageSize:10,showRowNumber:false})})}function FiveNumSumm(e){var t=parseData(e,"vector");var n=t["labels"];var r=t["vectors"];var i=n.unique();var s=[],o=0,u=0,a=[];for(var f=0;f<i.length;f++){d=[];d.push(i[f]);for(var l=0;l<n.length;l++){if(n[l]==i[f]){for(var c=0;c<r[l].length;c++){d.push(r[l][c])}}}a.push(d)}for(var h=0;h<a.length;h++){var p=[],d=[];var v=0,o=0,m=0,u=0;a[h].shift();a[h].sort();p.push(a[h]);d.push(p[0][0]);d.push(p[0][Math.floor(1/4*p[0].length)]);for(var g=0;g<p[0].length;g++){v+=parseFloat(p[0][g])}o=v/p[0].length;d.push(o);d.push(p[0][Math.floor(3/4*p[0].length)]);d.push(p[0][p[0].length-1]);d.push(v);for(var y=0;y<p[0].length;y++){m+=Math.pow(o-p[0][y],2)}u=m/p[0].length;d.push(Math.sqrt(u));d.push(u);s.push(d)}return{labels:i,summary:s}}function showResults(e){var t=document.getElementById("results");var n=document.getElementById("titleTable");var r=document.getElementById("titleChart");var i=document.getElementById("divider");var s=document.getElementById("spanClose");if(e){t.innerHTML="";n.innerHTML="";r.innerHTML="";i.style.visibility="visible";s.style.visibility="visible";var o=document.createElement("p");var u=document.createTextNode("Results");t.appendChild(u);var o=document.createElement("p");var u=document.createTextNode("Statistical summary table");n.appendChild(u);var o=document.createElement("p");var u=document.createTextNode("Boxplot");r.appendChild(u)}else{t.innerHTML="";n.innerHTML="";r.innerHTML="";i.style.visibility="hidden";s.style.visibility="hidden";var a=document.getElementById("fivenum_div");var f=new google.visualization.Table(a);f.clearChart();$("#chart_div").empty();$("#chart_div").height("0px")}}function handleFile(e){var t=e.target.files;var n=t[0];if(n.size/Math.pow(1024,2)>1){alert("This file size exceeds 1MB. Please, choose a smaller sample.")}else{var r=new FileReader;r.readAsText(n);r.onload=function(e){var t=e.target.result;try{var n=$.csv.toArrays(t);drawFiveNumTable(n);drawVisualization(n);showResults(true)}catch(r){showResults(false);$("#resultSection").animate({height:"0px"},1e3,function(){var e="There was an error on loading this file.\n";e+="Please, load a file with well-formed CSV format specification.\n";e+="Here, the error description: "+r;alert(e)})}}}}$(document).ready(function(){if(isAPIAvailable()){$("#filesFiveNum").bind("change",handleFile)}})